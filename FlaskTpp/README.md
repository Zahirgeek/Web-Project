# 淘票票后端
## Flask
- 数据库名: GP1FlaskTpp

## 项目分布
- 三端划分
    - 客户端
    - 商家端
    - 后端
- 客户端
    - 用户模块
        - 注册登录
        - 信息修改
        - 用户删除(不允许)
        - 权限
        
- 影院端
    - 用户
        - 一个用户对应多个电影院具体地址信息
    - 用户购买的电影播放权
    - 放映厅
    - 排挡
        - 用户可以查看排挡
        - 下单(锁单)
        - 支付
    
- 商家端

- 后端

- 通用模块
    - 地址管理        
    
    

## 开发流程
- 产品经理提出需求
- 开会评审
- 添加功能,周期(时间)
- 数据设计
    - DBA
    - 架构师
    - 后端经验丰富的工程师
    - 自己设计
    
- 建库建表
    - 模型建立
- 对数据进行操作
    - CRUD
    - 和前端联调
        - 前段需要请求接口
        - 接口对接
            - API文档
                - 接口功能
                - 接口地址
                - 接口所需参数
                    - 必须参数,非必须参数,通用参数
                - 接口返回数据
                    - 数据字段
                    - 状态码
                    - 错误码    
- 设计操作权限
    - 登录才能操作
    - 权限级别
    
- 送测
    - 测试工程师会有bug反馈
- 修复bug
    - 送测 
- 上线

### 端
- 一个项目至少有两端
    - 一端用户端
    - 后台管理端
    
- 大部分项目都是有三端的
    - 用户端
        - Web
        - 移动端
            - Android
            - IOS
        - 微信端
    - 商家端
        - Web
        - 移动端
            - Android
            - IOS
            
        - 微信端
    - 后台管理
        - Web
        - 移动端
            - Android
            - IOS
        - 微信端
- 实现使用RESTful
    - 用户端的接口
        - 不需要关注展示端的具体实现
        
    - 商家的接口
    - 后台管理接口            

### Property
- 将函数转换成属性
- 动态干预数据的存取

## 权限
- 两种设计
    - 单个字段实现所有权限
        - Linux权限设计
            - 使用二进制实现
            - 每一种权限使用一个不重复的二进制确定
                - 2的n次幂的值
                
            - 优点
                - 各种权限互不干扰
                
        - 包含模式权限
            - 值越大权限越多,包含值小的所有权限
            
    - 多表实现权限
        - 用户表
        - 权限表
        - 用户权限表(用户表和权限表多对多的关系)
### 装饰器
- 面向切面编程的一种
- 在不修改源代码的情况下添加功能,添加控制逻辑
- 装饰器上内部参数
    - *args用来接收位置参数
        - 关键字参数默认值可以自动处理
        - 如果传递关键字参数,就需要自己处理
            - 接收参数
            - 传递参数
    - **kwargs用来接收关键字参数
    - 如果原函数拥有返回值
        - 默认只有调用的话,返回值会被丢弃
        - 想接受返回值,要进行数据的返回
        
        
## 权限系统
- Linux
- 权限分类
    - 1 读权限
    - 2 写权限
    - 4 修改权限
    
## 特殊登录
- 扫码登录
    - 前置条件
        - 有一个登录的账号
    - 使用登录好的账号中的token来访问自己登录接口
        - 常规登录接口
            - 用户名
            - 密码
            - 手机号
            - 邮箱
        - 特殊登录接口
            - 直接可以通过token进行登录
        - 扫码出来的是特殊登陆接口    
    - 跨应用登录
    - 三方登录        
            
## 城市导入脚本
- doc/code/data/InsertCities.py
- 获取城市信息
- 将城市信息读取出来
- 插入数据库中



- 根据条件(id,手机号码,用户名)获取用户的方法get_user封装在model_utils.py(App/apis/movie_user/model_utils.py)中